<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PaceCtrl Widget Demo</title>
  <style>
    body { font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background: #f8fafc; padding: 32px; color: #0f172a; }
    .page { max-width: 720px; margin: 0 auto; display: grid; gap: 24px; }
    .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 16px; padding: 20px; box-shadow: 0 12px 30px rgba(15, 23, 42, 0.08); }
    form { display: grid; gap: 16px; }
    label { font-size: 14px; color: #475569; }
    input[type="text"] { padding: 10px 12px; border-radius: 12px; border: 1px solid #cbd5e1; }
    .status { font-size: 14px; color: #475569; }
    .widget-host { border: 1px dashed #cbd5e1; padding: 16px; border-radius: 16px; background: #fff; }
  </style>
</head>
<body>
  <div class="page">
    <h1>PaceCtrl Widget Demo</h1>
    <div class="card">
      <p>This page mounts the built UMD widget bundle. Point <code>apiBaseUrl</code> at your local FastAPI server or Railway deployment.</p>
      <form id="demo-form">
        <label>Passenger name (example form field)</label>
        <input type="text" name="passenger_name" placeholder="Ada Lovelace" />
        <div id="pacectrl-widget" class="widget-host" data-external-trip-id="HEL-TLL-2025-12-12"></div>
        <button type="submit">Submit form</button>
        <div class="status" id="form-status"></div>
      </form>
    </div>
  </div>

  <script src="./dist/widget.js"></script>
  <script>
    const apiBaseUrl = localStorage.getItem("pacectrl_api") || "http://localhost:8000";
    const form = document.getElementById("demo-form");
    const status = document.getElementById("form-status");

    window.PaceCtrlWidget.init({
      container: "#pacectrl-widget",
      apiBaseUrl,
      onIntentCreated: (intent) => {
        status.textContent = `Intent stored: ${intent.intent_id}`;
      }
    });

    form?.addEventListener("submit", (e) => {
      e.preventDefault();
      const data = new FormData(form);
      const body = Object.fromEntries(data.entries());
      status.textContent = `Form submit payload: ${JSON.stringify(body)}`;
    });
  </script>
</body>
</html>
